<!-- Upload Section -->
<section id="uploadSection" class="app-section">
  <h2 class="mb-4"><i class="bi bi-cloud-arrow-up text-primary"></i> Upload SPJ Baru</h2>

  <div class="alert alert-info" id="uploadAlert" style="display: none;"></div>

  <div class="card card-custom p-4">
    <form id="uploadForm">
      <div class="row g-4">
        <div class="col-md-4">
          <label class="form-label">Tahun Anggaran</label>
          <select id="tahunAnggaran" class="form-select" required></select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Bulan SPJ</label>
          <select id="bulan" class="form-select" required>
            <option value="">Pilih Bulan</option>
            <option value="Januari">Januari</option>
            <option value="Februari">Februari</option>
            <option value="Maret">Maret</option>
            <option value="April">April</option>
            <option value="Mei">Mei</option>
            <option value="Juni">Juni</option>
            <option value="Juli">Juli</option>
            <option value="Agustus">Agustus</option>
            <option value="September">September</option>
            <option value="Oktober">Oktober</option>
            <option value="November">November</option>
            <option value="Desember">Desember</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Bidang Pengusul</label>
          <select id="bidang" class="form-select" required></select>
        </div>

        <div class="col-md-12">
          <label class="form-label">Kode Rekening Dasar (UTAMA)</label>
          <select id="kodeUtama" class="form-select" required>
            <option value="">Pilih Bidang Terlebih Dahulu</option>
          </select>
        </div>

        <div class="col-md-12">
          <label class="form-label">Kode Rekening Rincian (BAGIAN)</label>
          <select id="kodeBagian" class="form-select" required>
            <option value="">Pilih Kode Utama Terlebih Dahulu</option>
          </select>
        </div>

        <div class="col-md-12">
          <label class="form-label">Uraian Kegiatan Anggaran</label>
          <input type="text" id="uraianKegiatan" class="form-control bg-light" readonly>
        </div>

        <div class="col-md-4">
          <div class="p-2 border rounded bg-light">
            <small class="text-muted d-block uppercase" style="font-size: 10px;">TOTAL PAGU</small>
            <input type="text" id="totalPagu" class="form-control-plaintext fw-bold" readonly value="Rp 0">
          </div>
        </div>
        <div class="col-md-4">
          <div class="p-2 border rounded bg-light text-danger">
            <small class="text-muted d-block uppercase" style="font-size: 10px;">SUDAH TERPAKAI</small>
            <input type="text" id="terpakai" class="form-control-plaintext fw-bold text-danger" readonly value="Rp 0">
          </div>
        </div>
        <div class="col-md-4">
          <div class="p-2 border rounded bg-light text-success">
            <small class="text-muted d-block uppercase" style="font-size: 10px;">SISA PAGU</small>
            <input type="text" id="sisaPagu" class="form-control-plaintext fw-bold text-success" readonly value="Rp 0">
          </div>
        </div>

        <hr>

        <div class="col-md-6">
          <label class="form-label">Nomor SPM</label>
          <input type="text" id="nomorSPM" class="form-control" required placeholder="001/SPM/XII/2026">
        </div>
        <div class="col-md-6">
          <label class="form-label">Nama Kegiatan / Keperluan</label>
          <input type="text" id="namaKegiatan" class="form-control" required placeholder="Contoh: Belanja ATK Kantor">
        </div>
        <div class="col-md-4">
          <label class="form-label">Kategori</label>
          <select id="kategori" class="form-select" required>
            <option value="">Pilih Kategori</option>
            <option value="Operasional">Operasional</option>
            <option value="Belanja Modal">Belanja Modal</option>
            <option value="Honorarium">Honorarium</option>
            <option value="LS">LS</option>
            <option value="GU">GU</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Nominal (Rp)</label>
          <input type="number" id="nominal" class="form-control fw-bold text-primary" required placeholder="0">
          <small id="nominalWarning" class="text-danger mt-1" style="display:none;"><i
              class="bi bi-exclamation-circle"></i> Melebihi sisa pagu!</small>
        </div>
        <div class="col-md-4">
          <label class="form-label">Penerima Manfaat</label>
          <input type="text" id="penerima" class="form-control" required placeholder="Nama Toko atau Orang">
        </div>

        <div class="col-md-12">
          <div class="p-3 border rounded">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h6><i class="bi bi-receipt"></i> Rincian Pajak (Optional)</h6>
              <button type="button" class="btn btn-sm btn-outline-info" onclick="addPajakItem()">
                <i class="bi bi-plus-lg"></i> Tambah Pajak
              </button>
            </div>
            <div id="pajakContainer"></div>
            <div class="mt-3 text-end fs-5 fw-bold">
              Total Pajak: <span id="totalPajakDisplay" class="text-info">Rp 0</span>
            </div>
          </div>
        </div>

        <div class="col-md-12">
          <label class="form-label">Dokumen SPJ (PDF/JPG)</label>
          <div class="upload-box p-5 border-2 border-dashed rounded text-center"
            style="border-style: dashed; cursor: pointer;" onclick="document.getElementById('fileInput').click()">
            <i class="bi bi-file-earmark-pdf fs-1 text-muted"></i>
            <p class="mt-2 text-muted">Klik di sini untuk upload file arsip</p>
            <input type="file" id="fileInput" class="hidden" style="display:none;" onchange="previewFile(this)">
          </div>
          <div id="filePreview" class="mt-3 alert alert-success" style="display:none;"></div>
        </div>

        <div class="col-md-12 mt-4 text-center">
          <button type="submit" class="btn btn-primary btn-lg px-5 shadow-sm">
            <i class="bi bi-cloud-arrow-up"></i> SIMPAN DAN UPLOAD ARSIP
          </button>
        </div>

      </div>
    </form>
  </div>
</section>